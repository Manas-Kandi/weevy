var Nt=Object.defineProperty;var St=(t,e,n)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>St(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function Be(){}function P(t,e){for(const n in e)t[n]=e[n];return t}function lt(t){return t()}function Re(){return Object.create(null)}function Q(t){t.forEach(lt)}function st(t){return typeof t=="function"}function T(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function $t(t){return Object.keys(t).length===0}function he(t,e,n,o){if(t){const l=it(t,e,n,o);return t[0](l)}}function it(t,e,n,o){return t[1]&&o?P(n.ctx.slice(),t[1](o(e))):n.ctx}function _e(t,e,n,o){return t[2],e.dirty}function pe(t,e,n,o,l,s){if(l){const i=it(e,n,o,s);t.p(i,l)}}function me(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function K(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Xe(t,e){const n={};e=new Set(e);for(const o in t)!e.has(o)&&o[0]!=="$"&&(n[o]=t[o]);return n}function m(t,e){t.appendChild(e)}function Y(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function ae(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function ne(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function V(t){return document.createTextNode(t)}function I(){return V(" ")}function De(){return V("")}function L(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ke(t,e){for(const n in e)p(t,n,e[n])}function Ct(t){return Array.from(t.childNodes)}function ce(t,e){e=""+e,t.data!==e&&(t.data=e)}function J(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function be(t,e,n){t.classList.toggle(e,!!n)}function Et(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}function ye(t,e){return new t(e)}let de;function fe(t){de=t}function rt(){if(!de)throw new Error("Function called outside component initialization");return de}function ct(t){rt().$$.on_mount.push(t)}function Fe(){const t=rt();return(e,n,{cancelable:o=!1}={})=>{const l=t.$$.callbacks[e];if(l){const s=Et(e,n,{cancelable:o});return l.slice().forEach(i=>{i.call(t,s)}),!s.defaultPrevented}return!0}}const se=[],ie=[];let re=[];const ze=[],At=Promise.resolve();let Oe=!1;function Wt(){Oe||(Oe=!0,At.then(ut))}function Pe(t){re.push(t)}function Ae(t){ze.push(t)}const We=new Set;let le=0;function ut(){if(le!==0)return;const t=de;do{try{for(;le<se.length;){const e=se[le];le++,fe(e),It(e.$$)}}catch(e){throw se.length=0,le=0,e}for(fe(null),se.length=0,le=0;ie.length;)ie.pop()();for(let e=0;e<re.length;e+=1){const n=re[e];We.has(n)||(We.add(n),n())}re.length=0}while(se.length);for(;ze.length;)ze.pop()();Oe=!1,We.clear(),fe(t)}function It(t){if(t.fragment!==null){t.update(),Q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Pe)}}function Mt(t){const e=[],n=[];re.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),re=e}const we=new Set;let oe;function Ne(){oe={r:0,c:[],p:oe}}function Se(){oe.r||Q(oe.c),oe=oe.p}function A(t,e){t&&t.i&&(we.delete(t),t.i(e))}function M(t,e,n,o){if(t&&t.o){if(we.has(t))return;we.add(t),oe.c.push(()=>{we.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function j(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ue(t,e){const n={},o={},l={$$scope:1};let s=t.length;for(;s--;){const i=t[s],c=e[s];if(c){for(const u in i)u in c||(o[u]=1);for(const u in c)l[u]||(n[u]=c[u],l[u]=1);t[s]=c}else for(const u in i)l[u]=1}for(const i in o)i in n||(n[i]=void 0);return n}function $e(t){return typeof t=="object"&&t!==null?t:{}}function Ie(t,e,n){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function q(t){t&&t.c()}function R(t,e,n){const{fragment:o,after_update:l}=t.$$;o&&o.m(e,n),Pe(()=>{const s=t.$$.on_mount.map(lt).filter(st);t.$$.on_destroy?t.$$.on_destroy.push(...s):Q(s),t.$$.on_mount=[]}),l.forEach(Pe)}function X(t,e){const n=t.$$;n.fragment!==null&&(Mt(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Bt(t,e){t.$$.dirty[0]===-1&&(se.push(t),Wt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,o,l,s,i=null,c=[-1]){const u=de;fe(t);const r=t.$$={fragment:null,ctx:[],props:s,update:Be,not_equal:l,bound:Re(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Re(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};i&&i(r.root);let f=!1;if(r.ctx=n?n(t,e.props||{},(d,a,..._)=>{const g=_.length?_[0]:a;return r.ctx&&l(r.ctx[d],r.ctx[d]=g)&&(!r.skip_bound&&r.bound[d]&&r.bound[d](g),f&&Bt(t,d)),a}):[],r.update(),f=!0,Q(r.before_update),r.fragment=o?o(r.ctx):!1,e.target){if(e.hydrate){const d=Ct(e.target);r.fragment&&r.fragment.l(d),d.forEach(D)}else r.fragment&&r.fragment.c();e.intro&&A(t.$$.fragment),R(t,e.target,e.anchor),ut()}fe(u)}class Z{constructor(){Ee(this,"$$");Ee(this,"$$set")}$destroy(){X(this,1),this.$destroy=Be}$on(e,n){if(!st(n))return Be;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(e){this.$$set&&!$t(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zt);/**
 * @license lucide-svelte v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function je(t,e,n){const o=t.slice();return o[10]=e[n][0],o[11]=e[n][1],o}function Me(t){let e,n=[t[11]],o={};for(let l=0;l<n.length;l+=1)o=P(o,n[l]);return{c(){e=ne(t[10]),ke(e,o)},m(l,s){Y(l,e,s)},p(l,s){ke(e,o=ue(n,[s&32&&l[11]]))},d(l){l&&D(e)}}}function Ke(t){let e=t[10],n,o=t[10]&&Me(t);return{c(){o&&o.c(),n=De()},m(l,s){o&&o.m(l,s),Y(l,n,s)},p(l,s){l[10]?e?T(e,l[10])?(o.d(1),o=Me(l),e=l[10],o.c(),o.m(n.parentNode,n)):o.p(l,s):(o=Me(l),e=l[10],o.c(),o.m(n.parentNode,n)):e&&(o.d(1),o=null,e=l[10])},d(l){l&&D(n),o&&o.d(l)}}}function Ot(t){let e,n,o,l,s,i=j(t[5]),c=[];for(let a=0;a<i.length;a+=1)c[a]=Ke(je(t,i,a));const u=t[9].default,r=he(u,t,t[8],null);let f=[qe,t[6],{width:t[2]},{height:t[2]},{stroke:t[1]},{"stroke-width":o=t[4]?Number(t[3])*24/Number(t[2]):t[3]},{class:l=`lucide-icon lucide lucide-${t[0]} ${t[7].class??""}`}],d={};for(let a=0;a<f.length;a+=1)d=P(d,f[a]);return{c(){e=ne("svg");for(let a=0;a<c.length;a+=1)c[a].c();n=De(),r&&r.c(),ke(e,d)},m(a,_){Y(a,e,_);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(e,null);m(e,n),r&&r.m(e,null),s=!0},p(a,[_]){if(_&32){i=j(a[5]);let g;for(g=0;g<i.length;g+=1){const v=je(a,i,g);c[g]?c[g].p(v,_):(c[g]=Ke(v),c[g].c(),c[g].m(e,n))}for(;g<c.length;g+=1)c[g].d(1);c.length=i.length}r&&r.p&&(!s||_&256)&&pe(r,u,a,a[8],s?_e(u,a[8],_,null):me(a[8]),null),ke(e,d=ue(f,[qe,_&64&&a[6],(!s||_&4)&&{width:a[2]},(!s||_&4)&&{height:a[2]},(!s||_&2)&&{stroke:a[1]},(!s||_&28&&o!==(o=a[4]?Number(a[3])*24/Number(a[2]):a[3]))&&{"stroke-width":o},(!s||_&129&&l!==(l=`lucide-icon lucide lucide-${a[0]} ${a[7].class??""}`))&&{class:l}]))},i(a){s||(A(r,a),s=!0)},o(a){M(r,a),s=!1},d(a){a&&D(e),ae(c,a),r&&r.d(a)}}}function Pt(t,e,n){const o=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let l=Xe(e,o),{$$slots:s={},$$scope:i}=e,{name:c}=e,{color:u="currentColor"}=e,{size:r=24}=e,{strokeWidth:f=2}=e,{absoluteStrokeWidth:d=!1}=e,{iconNode:a}=e;return t.$$set=_=>{n(7,e=P(P({},e),K(_))),n(6,l=Xe(e,o)),"name"in _&&n(0,c=_.name),"color"in _&&n(1,u=_.color),"size"in _&&n(2,r=_.size),"strokeWidth"in _&&n(3,f=_.strokeWidth),"absoluteStrokeWidth"in _&&n(4,d=_.absoluteStrokeWidth),"iconNode"in _&&n(5,a=_.iconNode),"$$scope"in _&&n(8,i=_.$$scope)},e=K(e),[c,u,r,f,d,a,l,e,i,s]}class Ce extends Z{constructor(e){super(),U(this,e,Pt,Ot,T,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function Dt(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(l,s){o&&o.m(l,s),e=!0},p(l,s){o&&o.p&&(!e||s&8)&&pe(o,n,l,l[3],e?_e(n,l[3],s,null):me(l[3]),null)},i(l){e||(A(o,l),e=!0)},o(l){M(o,l),e=!1},d(l){o&&o.d(l)}}}function Ft(t){let e,n;const o=[{name:"book-open"},t[1],{iconNode:t[0]}];let l={$$slots:{default:[Dt]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)l=P(l,o[s]);return e=new Ce({props:l}),{c(){q(e.$$.fragment)},m(s,i){R(e,s,i),n=!0},p(s,[i]){const c=i&3?ue(o,[o[0],i&2&&$e(s[1]),i&1&&{iconNode:s[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){X(e,s)}}}function Lt(t,e,n){let{$$slots:o={},$$scope:l}=e;const s=[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"}]];return t.$$set=i=>{n(1,e=P(P({},e),K(i))),"$$scope"in i&&n(3,l=i.$$scope)},e=K(e),[s,e,o,l]}class ft extends Z{constructor(e){super(),U(this,e,Lt,Ft,T,{})}}function Yt(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(l,s){o&&o.m(l,s),e=!0},p(l,s){o&&o.p&&(!e||s&8)&&pe(o,n,l,l[3],e?_e(n,l[3],s,null):me(l[3]),null)},i(l){e||(A(o,l),e=!0)},o(l){M(o,l),e=!1},d(l){o&&o.d(l)}}}function Rt(t){let e,n;const o=[{name:"brain"},t[1],{iconNode:t[0]}];let l={$$slots:{default:[Yt]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)l=P(l,o[s]);return e=new Ce({props:l}),{c(){q(e.$$.fragment)},m(s,i){R(e,s,i),n=!0},p(s,[i]){const c=i&3?ue(o,[o[0],i&2&&$e(s[1]),i&1&&{iconNode:s[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){X(e,s)}}}function Xt(t,e,n){let{$$slots:o={},$$scope:l}=e;const s=[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"}]];return t.$$set=i=>{n(1,e=P(P({},e),K(i))),"$$scope"in i&&n(3,l=i.$$scope)},e=K(e),[s,e,o,l]}class at extends Z{constructor(e){super(),U(this,e,Xt,Rt,T,{})}}function qt(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(l,s){o&&o.m(l,s),e=!0},p(l,s){o&&o.p&&(!e||s&8)&&pe(o,n,l,l[3],e?_e(n,l[3],s,null):me(l[3]),null)},i(l){e||(A(o,l),e=!0)},o(l){M(o,l),e=!1},d(l){o&&o.d(l)}}}function jt(t){let e,n;const o=[{name:"file-input"},t[1],{iconNode:t[0]}];let l={$$slots:{default:[qt]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)l=P(l,o[s]);return e=new Ce({props:l}),{c(){q(e.$$.fragment)},m(s,i){R(e,s,i),n=!0},p(s,[i]){const c=i&3?ue(o,[o[0],i&2&&$e(s[1]),i&1&&{iconNode:s[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){X(e,s)}}}function Kt(t,e,n){let{$$slots:o={},$$scope:l}=e;const s=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M2 15h10"}],["path",{d:"m9 18 3-3-3-3"}]];return t.$$set=i=>{n(1,e=P(P({},e),K(i))),"$$scope"in i&&n(3,l=i.$$scope)},e=K(e),[s,e,o,l]}class dt extends Z{constructor(e){super(),U(this,e,Kt,jt,T,{})}}function Tt(t){let e;const n=t[2].default,o=he(n,t,t[3],null);return{c(){o&&o.c()},m(l,s){o&&o.m(l,s),e=!0},p(l,s){o&&o.p&&(!e||s&8)&&pe(o,n,l,l[3],e?_e(n,l[3],s,null):me(l[3]),null)},i(l){e||(A(o,l),e=!0)},o(l){M(o,l),e=!1},d(l){o&&o.d(l)}}}function Ht(t){let e,n;const o=[{name:"file-output"},t[1],{iconNode:t[0]}];let l={$$slots:{default:[Tt]},$$scope:{ctx:t}};for(let s=0;s<o.length;s+=1)l=P(l,o[s]);return e=new Ce({props:l}),{c(){q(e.$$.fragment)},m(s,i){R(e,s,i),n=!0},p(s,[i]){const c=i&3?ue(o,[o[0],i&2&&$e(s[1]),i&1&&{iconNode:s[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:s}),e.$set(c)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){X(e,s)}}}function Jt(t,e,n){let{$$slots:o={},$$scope:l}=e;const s=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M2 15h10"}],["path",{d:"m5 12-3 3 3 3"}]];return t.$$set=i=>{n(1,e=P(P({},e),K(i))),"$$scope"in i&&n(3,l=i.$$scope)},e=K(e),[s,e,o,l]}class ht extends Z{constructor(e){super(),U(this,e,Jt,Ht,T,{})}}function Vt(t){let e,n,o,l,s,i,c,u=t[0].data.label+"",r,f,d,a,_,g,v;var b=t[2][t[0].type];function B(N,C){return{props:{size:24}}}return b&&(s=ye(b,B())),{c(){e=S("div"),n=S("div"),o=I(),l=S("div"),s&&q(s.$$.fragment),i=I(),c=S("div"),r=V(u),f=I(),d=S("div"),p(n,"class","connection-port input-port svelte-uxnzs7"),p(n,"title","Connect to this node"),p(l,"class","node-icon svelte-uxnzs7"),J(l,"color",t[3][t[0].type]),p(c,"class","node-label svelte-uxnzs7"),p(d,"class","connection-port output-port svelte-uxnzs7"),p(d,"title","Create connection from this node"),p(e,"class","workflow-node svelte-uxnzs7"),J(e,"left",t[0].position.x+"px"),J(e,"top",t[0].position.y+"px"),J(e,"border-color",t[3][t[0].type]),p(e,"role","group"),p(e,"aria-label",a=`Workflow node ${t[0].data.label}`),be(e,"selected",t[1])},m(N,C){Y(N,e,C),m(e,n),m(e,o),m(e,l),s&&R(s,l,null),m(e,i),m(e,c),m(c,r),m(e,f),m(e,d),_=!0,g||(v=[L(n,"click",t[6]),L(d,"click",t[5]),L(e,"click",t[4])],g=!0)},p(N,[C]){if(C&1&&b!==(b=N[2][N[0].type])){if(s){Ne();const W=s;M(W.$$.fragment,1,0,()=>{X(W,1)}),Se()}b?(s=ye(b,B()),q(s.$$.fragment),A(s.$$.fragment,1),R(s,l,null)):s=null}(!_||C&1)&&J(l,"color",N[3][N[0].type]),(!_||C&1)&&u!==(u=N[0].data.label+"")&&ce(r,u),(!_||C&1)&&J(e,"left",N[0].position.x+"px"),(!_||C&1)&&J(e,"top",N[0].position.y+"px"),(!_||C&1)&&J(e,"border-color",N[3][N[0].type]),(!_||C&1&&a!==(a=`Workflow node ${N[0].data.label}`))&&p(e,"aria-label",a),(!_||C&2)&&be(e,"selected",N[1])},i(N){_||(s&&A(s.$$.fragment,N),_=!0)},o(N){s&&M(s.$$.fragment,N),_=!1},d(N){N&&D(e),s&&X(s),g=!1,Q(v)}}}function Ut(t,e,n){let{node:o}=e,{selected:l=!1}=e;const s=Fe(),i={brain:at,input:dt,output:ht,knowledge:ft},c={brain:"#8B5CF6",input:"#3B82F6",output:"#10B981",knowledge:"#F59E0B"};function u(d){d.stopPropagation(),s("select")}function r(d){d.stopPropagation(),s("connectionStart")}function f(d){d.stopPropagation(),s("connectionEnd")}return t.$$set=d=>{"node"in d&&n(0,o=d.node),"selected"in d&&n(1,l=d.selected)},[o,l,i,c,u,r,f]}class Zt extends Z{constructor(e){super(),U(this,e,Ut,Vt,T,{node:0,selected:1})}}function Te(t,e,n){const o=t.slice();return o[35]=e[n],o}function He(t,e,n){const o=t.slice();o[38]=e[n];const l=o[1].get(o[38].from);o[39]=l;const s=o[1].get(o[38].to);return o[40]=s,o}function Je(t){let e,n,o,l,s;return{c(){e=ne("line"),p(e,"x1",n=t[39].position.x+60),p(e,"y1",o=t[39].position.y+40),p(e,"x2",l=t[40].position.x),p(e,"y2",s=t[40].position.y+40),p(e,"stroke","#666"),p(e,"stroke-width","2"),p(e,"marker-end","url(#arrowhead)")},m(i,c){Y(i,e,c)},p(i,c){c[0]&18&&n!==(n=i[39].position.x+60)&&p(e,"x1",n),c[0]&18&&o!==(o=i[39].position.y+40)&&p(e,"y1",o),c[0]&18&&l!==(l=i[40].position.x)&&p(e,"x2",l),c[0]&18&&s!==(s=i[40].position.y+40)&&p(e,"y2",s)},d(i){i&&D(e)}}}function Ve(t){let e,n=t[39]&&t[40]&&Je(t);return{c(){n&&n.c(),e=De()},m(o,l){n&&n.m(o,l),Y(o,e,l)},p(o,l){o[39]&&o[40]?n?n.p(o,l):(n=Je(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(o){o&&D(e),n&&n.d(o)}}}function Ue(t){let e,n;function o(){return t[18](t[35])}function l(){return t[19](t[35])}function s(){return t[20](t[35])}return e=new Zt({props:{node:t[35],selected:t[0]===t[35].id}}),e.$on("select",o),e.$on("connectionStart",l),e.$on("connectionEnd",s),{c(){q(e.$$.fragment)},m(i,c){R(e,i,c),n=!0},p(i,c){t=i;const u={};c[0]&32&&(u.node=t[35]),c[0]&33&&(u.selected=t[0]===t[35].id),e.$set(u)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){M(e.$$.fragment,i),n=!1},d(i){X(e,i)}}}function Gt(t){let e,n,o,l,s,i,c,u,r,f,d=Math.round(t[3]*100)+"",a,_,g,v,b,B,N,C,W,x,H,E=j(t[4]),w=[];for(let y=0;y<E.length;y+=1)w[y]=Ve(He(t,E,y));let O=j(t[5]),$=[];for(let y=0;y<O.length;y+=1)$[y]=Ue(Te(t,O,y));const ee=y=>M($[y],1,1,()=>{$[y]=null});return{c(){e=S("div"),n=S("div"),o=ne("svg");for(let y=0;y<w.length;y+=1)w[y].c();l=ne("defs"),s=ne("marker"),i=ne("polygon"),c=I();for(let y=0;y<$.length;y+=1)$[y].c();u=I(),r=S("div"),f=S("div"),a=V(d),_=V("%"),g=I(),v=S("button"),v.textContent="+",b=I(),B=S("button"),B.textContent="-",N=I(),C=S("button"),C.textContent="↺",p(i,"points","0 0, 10 3.5, 0 7"),p(i,"fill","#666"),p(s,"id","arrowhead"),p(s,"markerWidth","10"),p(s,"markerHeight","7"),p(s,"refX","9"),p(s,"refY","3.5"),p(s,"orient","auto"),p(o,"class","connections-layer svelte-1s5qi4x"),p(n,"class","canvas svelte-1s5qi4x"),p(n,"role","application"),p(n,"aria-label","Zoomable and pannable workflow canvas"),p(n,"tabindex","0"),p(f,"class","zoom-level svelte-1s5qi4x"),p(v,"class","control-btn svelte-1s5qi4x"),p(B,"class","control-btn svelte-1s5qi4x"),p(C,"class","control-btn svelte-1s5qi4x"),p(r,"class","controls svelte-1s5qi4x"),p(e,"class","canvas-container svelte-1s5qi4x"),p(e,"role","application"),p(e,"aria-label","Workflow canvas container")},m(y,z){Y(y,e,z),m(e,n),m(n,o);for(let k=0;k<w.length;k+=1)w[k]&&w[k].m(o,null);m(o,l),m(l,s),m(s,i),m(n,c);for(let k=0;k<$.length;k+=1)$[k]&&$[k].m(n,null);t[21](n),m(e,u),m(e,r),m(r,f),m(f,a),m(f,_),m(r,g),m(r,v),m(r,b),m(r,B),m(r,N),m(r,C),W=!0,x||(H=[L(n,"keydown",t[11]),L(n,"mousedown",t[6]),L(n,"mousemove",t[7]),L(n,"mouseup",t[8]),L(n,"mouseleave",t[8]),L(n,"wheel",t[10]),L(n,"dblclick",t[9]),L(v,"click",t[22]),L(B,"click",t[23]),L(C,"click",t[13])],x=!0)},p(y,z){if(z[0]&18){E=j(y[4]);let k;for(k=0;k<E.length;k+=1){const G=He(y,E,k);w[k]?w[k].p(G,z):(w[k]=Ve(G),w[k].c(),w[k].m(o,l))}for(;k<w.length;k+=1)w[k].d(1);w.length=E.length}if(z[0]&114721){O=j(y[5]);let k;for(k=0;k<O.length;k+=1){const G=Te(y,O,k);$[k]?($[k].p(G,z),A($[k],1)):($[k]=Ue(G),$[k].c(),A($[k],1),$[k].m(n,null))}for(Ne(),k=O.length;k<$.length;k+=1)ee(k);Se()}(!W||z[0]&8)&&d!==(d=Math.round(y[3]*100)+"")&&ce(a,d)},i(y){if(!W){for(let z=0;z<O.length;z+=1)A($[z]);W=!0}},o(y){$=$.filter(Boolean);for(let z=0;z<$.length;z+=1)M($[z]);W=!1},d(y){y&&D(e),ae(w,y),ae($,y),t[21](null),x=!1,Q(H)}}}function Qt(t,e,n){let o,l,{nodes:s=new Map}=e,{connections:i=new Map}=e,{selectedNodeId:c=null}=e;const u=Fe();let r,f=1,d=0,a=0,_=!1,g=0,v=0,b=0,B=0,N=!1,C=null;ct(()=>{var F;const h=(F=r.parentElement)==null?void 0:F.getBoundingClientRect();h&&(d=h.width/2-2500*f,a=h.height/2-2500*f),W()});function W(){r&&n(2,r.style.transform=`translate(${d}px, ${a}px) scale(${f})`,r)}function x(h){var F;(h.target===r||((F=h.target)==null?void 0:F.id)==="canvas-container")&&(_=!0,g=h.clientX,v=h.clientY,b=d,B=a)}function H(h){if(_){const F=h.clientX-g,te=h.clientY-v;d=b+F,a=B+te,W()}}function E(){_=!1}function w(h){if(h.target===r){const F=r.getBoundingClientRect(),te=(h.clientX-F.left)/f,ge=(h.clientY-F.top)/f;u("nodeAdd",{type:"brain",position:{x:te,y:ge}})}}function O(h){var Ye;h.preventDefault();const F=.1,te=(Ye=r.parentElement)==null?void 0:Ye.getBoundingClientRect();if(!te)return;const ge=h.clientX-te.left,Le=h.clientY-te.top,kt=(ge-d)/f,bt=(Le-a)/f,yt=h.deltaY<0?1:-1;n(3,f*=1+yt*F),n(3,f=Math.min(Math.max(.1,f),5)),d=ge-kt*f,a=Le-bt*f,W()}function $(h){h.key==="ArrowLeft"?(d+=40,W(),h.preventDefault()):h.key==="ArrowRight"?(d-=40,W(),h.preventDefault()):h.key==="ArrowUp"?(a+=40,W(),h.preventDefault()):h.key==="ArrowDown"?(a-=40,W(),h.preventDefault()):h.key==="+"||h.key==="="?(ee(1.2),h.preventDefault()):(h.key==="-"||h.key==="_")&&(ee(.8),h.preventDefault())}function ee(h){n(3,f*=h),n(3,f=Math.min(Math.max(.1,f),5)),W()}function y(){var F;n(3,f=1);const h=(F=r.parentElement)==null?void 0:F.getBoundingClientRect();h&&(d=h.width/2-2500,a=h.height/2-2500),W()}function z(h){n(0,c=h),u("nodeSelect",{nodeId:h})}function k(h){N=!0,C=h,console.log("🔗 Starting connection from:",h)}function G(h){N&&C&&C!==h&&(u("connectionCreate",{from:C,to:h}),console.log("✅ Connection created:",C,"->",h)),N=!1,C=null}const _t=h=>z(h.id),pt=h=>k(h.id),mt=h=>G(h.id);function gt(h){ie[h?"unshift":"push"](()=>{r=h,n(2,r)})}const vt=()=>ee(1.2),wt=()=>ee(.8);return t.$$set=h=>{"nodes"in h&&n(1,s=h.nodes),"connections"in h&&n(17,i=h.connections),"selectedNodeId"in h&&n(0,c=h.selectedNodeId)},t.$$.update=()=>{t.$$.dirty[0]&4&&r&&W(),t.$$.dirty[0]&2&&n(5,o=Array.from(s.values())),t.$$.dirty[0]&131072&&n(4,l=Array.from(i.values()))},[c,s,r,f,l,o,x,H,E,w,O,$,ee,y,z,k,G,i,_t,pt,mt,gt,vt,wt]}class xt extends Z{constructor(e){super(),U(this,e,Qt,Gt,T,{nodes:1,connections:17,selectedNodeId:0},null,[-1,-1])}}function Ze(t,e,n){const o=t.slice();return o[6]=e[n],o}function Ge(t){let e,n,o,l,s,i,c,u,r;var f=t[6].icon;function d(g,v){return{props:{size:20}}}f&&(o=ye(f,d()));function a(){return t[3](t[6])}function _(...g){return t[4](t[6],...g)}return{c(){e=S("div"),n=S("div"),o&&q(o.$$.fragment),l=I(),s=S("div"),s.textContent=`${t[6].label}`,i=I(),p(n,"class","component-icon"),J(n,"color",t[6].color),p(s,"class","component-label svelte-pdgzwu"),p(e,"class","component svelte-pdgzwu"),p(e,"role","button"),p(e,"aria-label",`Add ${t[6].label} node`),p(e,"tabindex","0")},m(g,v){Y(g,e,v),m(e,n),o&&R(o,n,null),m(e,l),m(e,s),m(e,i),c=!0,u||(r=[L(e,"click",a),L(e,"keydown",_)],u=!0)},p(g,v){if(t=g,f!==(f=t[6].icon)){if(o){Ne();const b=o;M(b.$$.fragment,1,0,()=>{X(b,1)}),Se()}f?(o=ye(f,d()),q(o.$$.fragment),A(o.$$.fragment,1),R(o,n,null)):o=null}},i(g){c||(o&&A(o.$$.fragment,g),c=!0)},o(g){o&&M(o.$$.fragment,g),c=!1},d(g){g&&D(e),o&&X(o),u=!1,Q(r)}}}function en(t){let e,n,o,l,s=j(t[0]),i=[];for(let u=0;u<s.length;u+=1)i[u]=Ge(Ze(t,s,u));const c=u=>M(i[u],1,1,()=>{i[u]=null});return{c(){e=S("div"),n=S("h3"),n.textContent="Components",o=I();for(let u=0;u<i.length;u+=1)i[u].c();p(n,"class","svelte-pdgzwu"),p(e,"class","components-panel svelte-pdgzwu"),p(e,"role","navigation"),p(e,"aria-label","Components panel")},m(u,r){Y(u,e,r),m(e,n),m(e,o);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(e,null);l=!0},p(u,[r]){if(r&7){s=j(u[0]);let f;for(f=0;f<s.length;f+=1){const d=Ze(u,s,f);i[f]?(i[f].p(d,r),A(i[f],1)):(i[f]=Ge(d),i[f].c(),A(i[f],1),i[f].m(e,null))}for(Ne(),f=s.length;f<i.length;f+=1)c(f);Se()}},i(u){if(!l){for(let r=0;r<s.length;r+=1)A(i[r]);l=!0}},o(u){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)M(i[r]);l=!1},d(u){u&&D(e),ae(i,u)}}}function tn(t){const e=Fe(),n=[{type:"brain",label:"AI Brain",icon:at,color:"#8B5CF6"},{type:"input",label:"Input",icon:dt,color:"#3B82F6"},{type:"output",label:"Output",icon:ht,color:"#10B981"},{type:"knowledge",label:"Knowledge",icon:ft,color:"#F59E0B"}];function o(c){e("nodeAdd",{type:c})}function l(c,u){(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),o(u))}return[n,o,l,c=>o(c.type),(c,u)=>l(u,c.type)]}class nn extends Z{constructor(e){super(),U(this,e,tn,en,T,{})}}class on{constructor(){this.ws=null,this.handlers=new Set}connect(){if(this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return;const n=`${location.protocol==="https:"?"wss":"ws"}://${location.host}/ws`;this.ws=new WebSocket(n),this.ws.onopen=()=>{console.log("[WS] connected")},this.ws.onmessage=o=>{try{const l=JSON.parse(o.data);this.handlers.forEach(s=>s(l))}catch(l){console.error("[WS] message parse error",l)}},this.ws.onclose=()=>{console.log("[WS] disconnected")},this.ws.onerror=o=>{console.error("[WS] error",o)}}onMessage(e){return this.handlers.add(e),()=>this.handlers.delete(e)}executeWorkflow(e){const n={type:"execute_workflow",data:e};this._send(n)}_send(e){const n=JSON.stringify(e);if(this.ws&&this.ws.readyState===WebSocket.OPEN)this.ws.send(n);else{console.warn("[WS] not open, buffering send until open");const o=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&(clearInterval(o),this.ws.send(n))},200)}}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}}const ve=new on;function Qe(t,e,n){const o=t.slice();return o[12]=e[n],o}function xe(t){let e,n,o,l,s=j(t[3]),i=[];for(let c=0;c<s.length;c+=1)i[c]=ot(Qe(t,s,c));return{c(){e=S("div"),n=S("h3"),n.textContent="Execution Results",o=I(),l=S("div");for(let c=0;c<i.length;c+=1)i[c].c();p(n,"class","svelte-1l1hlk0"),p(l,"class","results-content"),p(e,"class","results-panel svelte-1l1hlk0")},m(c,u){Y(c,e,u),m(e,n),m(e,o),m(e,l);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(l,null)},p(c,u){if(u&8){s=j(c[3]);let r;for(r=0;r<s.length;r+=1){const f=Qe(c,s,r);i[r]?i[r].p(f,u):(i[r]=ot(f),i[r].c(),i[r].m(l,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},d(c){c&&D(e),ae(i,c)}}}function et(t){let e,n=t[12].content+"",o;return{c(){e=S("p"),o=V(n),p(e,"class","svelte-1l1hlk0")},m(l,s){Y(l,e,s),m(e,o)},p(l,s){s&8&&n!==(n=l[12].content+"")&&ce(o,n)},d(l){l&&D(e)}}}function tt(t){let e,n=JSON.stringify(t[12].result,null,2)+"",o;return{c(){e=S("pre"),o=V(n),p(e,"class","svelte-1l1hlk0")},m(l,s){Y(l,e,s),m(e,o)},p(l,s){s&8&&n!==(n=JSON.stringify(l[12].result,null,2)+"")&&ce(o,n)},d(l){l&&D(e)}}}function nt(t){let e,n=t[12].error+"",o;return{c(){e=S("p"),o=V(n),p(e,"class","error-text svelte-1l1hlk0")},m(l,s){Y(l,e,s),m(e,o)},p(l,s){s&8&&n!==(n=l[12].error+"")&&ce(o,n)},d(l){l&&D(e)}}}function ot(t){let e,n,o=t[12].type+"",l,s,i,c,u,r=t[12].content&&et(t),f=t[12].result&&tt(t),d=t[12].error&&nt(t);return{c(){e=S("div"),n=S("strong"),l=V(o),s=I(),r&&r.c(),i=I(),f&&f.c(),c=I(),d&&d.c(),u=I(),p(n,"class","svelte-1l1hlk0"),p(e,"class","result-item svelte-1l1hlk0"),be(e,"error",t[12].type==="execution_error")},m(a,_){Y(a,e,_),m(e,n),m(n,l),m(e,s),r&&r.m(e,null),m(e,i),f&&f.m(e,null),m(e,c),d&&d.m(e,null),m(e,u)},p(a,_){_&8&&o!==(o=a[12].type+"")&&ce(l,o),a[12].content?r?r.p(a,_):(r=et(a),r.c(),r.m(e,i)):r&&(r.d(1),r=null),a[12].result?f?f.p(a,_):(f=tt(a),f.c(),f.m(e,c)):f&&(f.d(1),f=null),a[12].error?d?d.p(a,_):(d=nt(a),d.c(),d.m(e,u)):d&&(d.d(1),d=null),_&8&&be(e,"error",a[12].type==="execution_error")},d(a){a&&D(e),r&&r.d(),f&&f.d(),d&&d.d()}}}function ln(t){let e,n,o,l,s,i,c,u,r,f,d,a,_,g,v,b,B,N;r=new nn({}),r.$on("nodeAdd",t[4]);function C(w){t[9](w)}function W(w){t[10](w)}function x(w){t[11](w)}let H={};t[0]!==void 0&&(H.nodes=t[0]),t[1]!==void 0&&(H.connections=t[1]),t[2]!==void 0&&(H.selectedNodeId=t[2]),d=new xt({props:H}),ie.push(()=>Ie(d,"nodes",C)),ie.push(()=>Ie(d,"connections",W)),ie.push(()=>Ie(d,"selectedNodeId",x)),d.$on("nodeAdd",t[5]),d.$on("nodeSelect",t[6]),d.$on("connectionCreate",t[7]);let E=t[3].length>0&&xe(t);return{c(){e=I(),n=S("div"),o=S("header"),l=S("h1"),l.textContent="Weev AI Agent Workflow Builder",s=I(),i=S("button"),i.textContent="▶ Execute Workflow",c=I(),u=S("main"),q(r.$$.fragment),f=I(),q(d.$$.fragment),v=I(),E&&E.c(),document.title="Weev - AI Agent Workflow Builder",p(l,"class","svelte-1l1hlk0"),p(i,"class","execute-btn svelte-1l1hlk0"),p(o,"class","header svelte-1l1hlk0"),p(u,"class","main svelte-1l1hlk0"),p(n,"class","app svelte-1l1hlk0")},m(w,O){Y(w,e,O),Y(w,n,O),m(n,o),m(o,l),m(o,s),m(o,i),m(n,c),m(n,u),R(r,u,null),m(u,f),R(d,u,null),m(u,v),E&&E.m(u,null),b=!0,B||(N=L(i,"click",t[8]),B=!0)},p(w,[O]){const $={};!a&&O&1&&(a=!0,$.nodes=w[0],Ae(()=>a=!1)),!_&&O&2&&(_=!0,$.connections=w[1],Ae(()=>_=!1)),!g&&O&4&&(g=!0,$.selectedNodeId=w[2],Ae(()=>g=!1)),d.$set($),w[3].length>0?E?E.p(w,O):(E=xe(w),E.c(),E.m(u,null)):E&&(E.d(1),E=null)},i(w){b||(A(r.$$.fragment,w),A(d.$$.fragment,w),b=!0)},o(w){M(r.$$.fragment,w),M(d.$$.fragment,w),b=!1},d(w){w&&(D(e),D(n)),X(r),X(d),E&&E.d(),B=!1,N()}}}function sn(t,e,n){let o=new Map,l=new Map,s=null,i=[];ct(()=>(ve.connect(),ve.onMessage(v=>{n(3,i=[...i,v]),console.log("📨 Execution update:",v)}),()=>{ve.disconnect()}));function c(v){const b=`node_${Date.now()}`,B={brain:"AI Brain",input:"Input",output:"Output",knowledge:"Knowledge"},N={id:b,type:v.detail.type,position:{x:2400+Math.random()*100,y:2400+Math.random()*100},data:{label:B[v.detail.type],configuration:{}}};o.set(b,N),n(0,o),n(2,s=b)}function u(v){const b=`node_${Date.now()}`,B={brain:"AI Brain",input:"Input",output:"Output",knowledge:"Knowledge"},N={id:b,type:v.detail.type,position:v.detail.position,data:{label:B[v.detail.type],configuration:{}}};o.set(b,N),n(0,o),n(2,s=b)}function r(v){n(2,s=v.detail.nodeId)}function f(v){const b=`${v.detail.from}-${v.detail.to}`;l.set(b,{id:b,from:v.detail.from,to:v.detail.to}),n(1,l)}function d(){if(o.size===0){alert("Add some nodes to execute a workflow!");return}const v={workflow_id:`workflow_${Date.now()}`,nodes:Array.from(o.values()).map(b=>({node_id:b.id,node_type:b.type,system_rules:`Execute ${b.type} node`,user_configuration:b.data.configuration})),connections:Array.from(l.values())};n(3,i=[]),ve.executeWorkflow(v)}function a(v){o=v,n(0,o)}function _(v){l=v,n(1,l)}function g(v){s=v,n(2,s)}return[o,l,s,i,c,u,r,f,d,a,_,g]}class rn extends Z{constructor(e){super(),U(this,e,sn,ln,T,{})}}new rn({target:document.getElementById("app")});
