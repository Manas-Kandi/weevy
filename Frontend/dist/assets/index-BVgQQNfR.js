var Dt=Object.defineProperty;var Tt=(t,e,o)=>e in t?Dt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var Be=(t,e,o)=>Tt(t,typeof e!="symbol"?e+"":e,o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}})();function he(){}function Y(t,e){for(const o in e)t[o]=e[o];return t}function gt(t){return t()}function Ke(){return Object.create(null)}function te(t){t.forEach(gt)}function vt(t){return typeof t=="function"}function G(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Yt(t){return Object.keys(t).length===0}function _e(t,e,o,n){if(t){const s=bt(t,e,o,n);return t[0](s)}}function bt(t,e,o,n){return t[1]&&n?Y(o.ctx.slice(),t[1](n(e))):o.ctx}function pe(t,e,o,n){return t[2],e.dirty}function me(t,e,o,n,s,l){if(s){const i=bt(e,o,n,l);t.p(i,s)}}function ge(t){if(t.ctx.length>32){const e=[],o=t.ctx.length/32;for(let n=0;n<o;n++)e[n]=-1;return e}return-1}function Z(t){const e={};for(const o in t)o[0]!=="$"&&(e[o]=t[o]);return e}function qe(t,e){const o={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(o[n]=t[n]);return o}function _(t,e){t.appendChild(e)}function F(t,e,o){t.insertBefore(e,o||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function ie(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}function C(t){return document.createElement(t)}function le(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t){return document.createTextNode(t)}function O(){return Q(" ")}function Oe(){return Q("")}function j(t,e,o,n){return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)}function h(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function Ie(t,e){for(const o in e)h(t,o,e[o])}function Ft(t){return Array.from(t.childNodes)}function re(t,e){e=""+e,t.data!==e&&(t.data=e)}function we(t,e){t.value=e??""}function oe(t,e,o,n){o==null?t.style.removeProperty(e):t.style.setProperty(e,o,"")}function Ce(t,e,o){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}(!o||e!==void 0)&&(t.selectedIndex=-1)}function Ue(t){const e=t.querySelector(":checked");return e&&e.__value}function We(t,e,o){t.classList.toggle(e,!!o)}function Lt(t,e,{bubbles:o=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:o,cancelable:n})}function Me(t,e){return new t(e)}let ye;function ke(t){ye=t}function kt(){if(!ye)throw new Error("Function called outside component initialization");return ye}function wt(t){kt().$$.on_mount.push(t)}function ze(){const t=kt();return(e,o,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=Lt(e,o,{cancelable:n});return s.slice().forEach(i=>{i.call(t,l)}),!l.defaultPrevented}return!0}}const ue=[],fe=[];let de=[];const Fe=[],Xt=Promise.resolve();let Le=!1;function Rt(){Le||(Le=!0,Xt.then(yt))}function Ne(t){de.push(t)}function je(t){Fe.push(t)}const Pe=new Set;let ae=0;function yt(){if(ae!==0)return;const t=ye;do{try{for(;ae<ue.length;){const e=ue[ae];ae++,ke(e),Jt(e.$$)}}catch(e){throw ue.length=0,ae=0,e}for(ke(null),ue.length=0,ae=0;fe.length;)fe.pop()();for(let e=0;e<de.length;e+=1){const o=de[e];Pe.has(o)||(Pe.add(o),o())}de.length=0}while(ue.length);for(;Fe.length;)Fe.pop()();Le=!1,Pe.clear(),ke(t)}function Jt(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function Ht(t){const e=[],o=[];de.forEach(n=>t.indexOf(n)===-1?e.push(n):o.push(n)),o.forEach(n=>n()),de=e}const Ae=new Set;let se;function ve(){se={r:0,c:[],p:se}}function be(){se.r||te(se.c),se=se.p}function I(t,e){t&&t.i&&(Ae.delete(t),t.i(e))}function B(t,e,o,n){if(t&&t.o){if(Ae.has(t))return;Ae.add(t),se.c.push(()=>{Ae.delete(t),n&&(o&&t.d(1),n())}),t.o(e)}else n&&n()}function X(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ce(t,e){const o={},n={},s={$$scope:1};let l=t.length;for(;l--;){const i=t[l],c=e[l];if(c){for(const f in i)f in c||(n[f]=1);for(const f in c)s[f]||(o[f]=c[f],s[f]=1);t[l]=c}else for(const f in i)s[f]=1}for(const i in n)i in o||(o[i]=void 0);return o}function Se(t){return typeof t=="object"&&t!==null?t:{}}function De(t,e,o){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=o,o(t.$$.ctx[n]))}function K(t){t&&t.c()}function R(t,e,o){const{fragment:n,after_update:s}=t.$$;n&&n.m(e,o),Ne(()=>{const l=t.$$.on_mount.map(gt).filter(vt);t.$$.on_destroy?t.$$.on_destroy.push(...l):te(l),t.$$.on_mount=[]}),s.forEach(Ne)}function J(t,e){const o=t.$$;o.fragment!==null&&(Ht(o.after_update),te(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function Kt(t,e){t.$$.dirty[0]===-1&&(ue.push(t),Rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function x(t,e,o,n,s,l,i=null,c=[-1]){const f=ye;ke(t);const r=t.$$={fragment:null,ctx:[],props:l,update:he,not_equal:s,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ke(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};i&&i(r.root);let a=!1;if(r.ctx=o?o(t,e.props||{},(d,u,...p)=>{const v=p.length?p[0]:u;return r.ctx&&s(r.ctx[d],r.ctx[d]=v)&&(!r.skip_bound&&r.bound[d]&&r.bound[d](v),a&&Kt(t,d)),u}):[],r.update(),a=!0,te(r.before_update),r.fragment=n?n(r.ctx):!1,e.target){if(e.hydrate){const d=Ft(e.target);r.fragment&&r.fragment.l(d),d.forEach(D)}else r.fragment&&r.fragment.c();e.intro&&I(t.$$.fragment),R(t,e.target,e.anchor),yt()}ke(f)}class ee{constructor(){Be(this,"$$");Be(this,"$$set")}$destroy(){J(this,1),this.$destroy=he}$on(e,o){if(!vt(o))return he;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(o),()=>{const s=n.indexOf(o);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Yt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qt);/**
 * @license lucide-svelte v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};function Ze(t,e,o){const n=t.slice();return n[10]=e[o][0],n[11]=e[o][1],n}function Te(t){let e,o=[t[11]],n={};for(let s=0;s<o.length;s+=1)n=Y(n,o[s]);return{c(){e=le(t[10]),Ie(e,n)},m(s,l){F(s,e,l)},p(s,l){Ie(e,n=ce(o,[l&32&&s[11]]))},d(s){s&&D(e)}}}function Ge(t){let e=t[10],o,n=t[10]&&Te(t);return{c(){n&&n.c(),o=Oe()},m(s,l){n&&n.m(s,l),F(s,o,l)},p(s,l){s[10]?e?G(e,s[10])?(n.d(1),n=Te(s),e=s[10],n.c(),n.m(o.parentNode,o)):n.p(s,l):(n=Te(s),e=s[10],n.c(),n.m(o.parentNode,o)):e&&(n.d(1),n=null,e=s[10])},d(s){s&&D(o),n&&n.d(s)}}}function Ut(t){let e,o,n,s,l,i=X(t[5]),c=[];for(let u=0;u<i.length;u+=1)c[u]=Ge(Ze(t,i,u));const f=t[9].default,r=_e(f,t,t[8],null);let a=[Ve,t[6],{width:t[2]},{height:t[2]},{stroke:t[1]},{"stroke-width":n=t[4]?Number(t[3])*24/Number(t[2]):t[3]},{class:s=`lucide-icon lucide lucide-${t[0]} ${t[7].class??""}`}],d={};for(let u=0;u<a.length;u+=1)d=Y(d,a[u]);return{c(){e=le("svg");for(let u=0;u<c.length;u+=1)c[u].c();o=Oe(),r&&r.c(),Ie(e,d)},m(u,p){F(u,e,p);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(e,null);_(e,o),r&&r.m(e,null),l=!0},p(u,[p]){if(p&32){i=X(u[5]);let v;for(v=0;v<i.length;v+=1){const M=Ze(u,i,v);c[v]?c[v].p(M,p):(c[v]=Ge(M),c[v].c(),c[v].m(e,o))}for(;v<c.length;v+=1)c[v].d(1);c.length=i.length}r&&r.p&&(!l||p&256)&&me(r,f,u,u[8],l?pe(f,u[8],p,null):ge(u[8]),null),Ie(e,d=ce(a,[Ve,p&64&&u[6],(!l||p&4)&&{width:u[2]},(!l||p&4)&&{height:u[2]},(!l||p&2)&&{stroke:u[1]},(!l||p&28&&n!==(n=u[4]?Number(u[3])*24/Number(u[2]):u[3]))&&{"stroke-width":n},(!l||p&129&&s!==(s=`lucide-icon lucide lucide-${u[0]} ${u[7].class??""}`))&&{class:s}]))},i(u){l||(I(r,u),l=!0)},o(u){B(r,u),l=!1},d(u){u&&D(e),ie(c,u),r&&r.d(u)}}}function Vt(t,e,o){const n=["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"];let s=qe(e,n),{$$slots:l={},$$scope:i}=e,{name:c}=e,{color:f="currentColor"}=e,{size:r=24}=e,{strokeWidth:a=2}=e,{absoluteStrokeWidth:d=!1}=e,{iconNode:u}=e;return t.$$set=p=>{o(7,e=Y(Y({},e),Z(p))),o(6,s=qe(e,n)),"name"in p&&o(0,c=p.name),"color"in p&&o(1,f=p.color),"size"in p&&o(2,r=p.size),"strokeWidth"in p&&o(3,a=p.strokeWidth),"absoluteStrokeWidth"in p&&o(4,d=p.absoluteStrokeWidth),"iconNode"in p&&o(5,u=p.iconNode),"$$scope"in p&&o(8,i=p.$$scope)},e=Z(e),[c,f,r,a,d,u,s,e,i,l]}class $e extends ee{constructor(e){super(),x(this,e,Vt,Ut,G,{name:0,color:1,size:2,strokeWidth:3,absoluteStrokeWidth:4,iconNode:5})}}function Zt(t){let e;const o=t[2].default,n=_e(o,t,t[3],null);return{c(){n&&n.c()},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&8)&&me(n,o,s,s[3],e?pe(o,s[3],l,null):ge(s[3]),null)},i(s){e||(I(n,s),e=!0)},o(s){B(n,s),e=!1},d(s){n&&n.d(s)}}}function Gt(t){let e,o;const n=[{name:"book-open"},t[1],{iconNode:t[0]}];let s={$$slots:{default:[Zt]},$$scope:{ctx:t}};for(let l=0;l<n.length;l+=1)s=Y(s,n[l]);return e=new $e({props:s}),{c(){K(e.$$.fragment)},m(l,i){R(e,l,i),o=!0},p(l,[i]){const c=i&3?ce(n,[n[0],i&2&&Se(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){o||(I(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){J(e,l)}}}function Qt(t,e,o){let{$$slots:n={},$$scope:s}=e;const l=[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"}]];return t.$$set=i=>{o(1,e=Y(Y({},e),Z(i))),"$$scope"in i&&o(3,s=i.$$scope)},e=Z(e),[l,e,n,s]}class Nt extends ee{constructor(e){super(),x(this,e,Qt,Gt,G,{})}}function xt(t){let e;const o=t[2].default,n=_e(o,t,t[3],null);return{c(){n&&n.c()},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&8)&&me(n,o,s,s[3],e?pe(o,s[3],l,null):ge(s[3]),null)},i(s){e||(I(n,s),e=!0)},o(s){B(n,s),e=!1},d(s){n&&n.d(s)}}}function en(t){let e,o;const n=[{name:"brain"},t[1],{iconNode:t[0]}];let s={$$slots:{default:[xt]},$$scope:{ctx:t}};for(let l=0;l<n.length;l+=1)s=Y(s,n[l]);return e=new $e({props:s}),{c(){K(e.$$.fragment)},m(l,i){R(e,l,i),o=!0},p(l,[i]){const c=i&3?ce(n,[n[0],i&2&&Se(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){o||(I(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){J(e,l)}}}function tn(t,e,o){let{$$slots:n={},$$scope:s}=e;const l=[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"}]];return t.$$set=i=>{o(1,e=Y(Y({},e),Z(i))),"$$scope"in i&&o(3,s=i.$$scope)},e=Z(e),[l,e,n,s]}class St extends ee{constructor(e){super(),x(this,e,tn,en,G,{})}}function nn(t){let e;const o=t[2].default,n=_e(o,t,t[3],null);return{c(){n&&n.c()},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&8)&&me(n,o,s,s[3],e?pe(o,s[3],l,null):ge(s[3]),null)},i(s){e||(I(n,s),e=!0)},o(s){B(n,s),e=!1},d(s){n&&n.d(s)}}}function on(t){let e,o;const n=[{name:"file-input"},t[1],{iconNode:t[0]}];let s={$$slots:{default:[nn]},$$scope:{ctx:t}};for(let l=0;l<n.length;l+=1)s=Y(s,n[l]);return e=new $e({props:s}),{c(){K(e.$$.fragment)},m(l,i){R(e,l,i),o=!0},p(l,[i]){const c=i&3?ce(n,[n[0],i&2&&Se(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){o||(I(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){J(e,l)}}}function ln(t,e,o){let{$$slots:n={},$$scope:s}=e;const l=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M2 15h10"}],["path",{d:"m9 18 3-3-3-3"}]];return t.$$set=i=>{o(1,e=Y(Y({},e),Z(i))),"$$scope"in i&&o(3,s=i.$$scope)},e=Z(e),[l,e,n,s]}class $t extends ee{constructor(e){super(),x(this,e,ln,on,G,{})}}function sn(t){let e;const o=t[2].default,n=_e(o,t,t[3],null);return{c(){n&&n.c()},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&8)&&me(n,o,s,s[3],e?pe(o,s[3],l,null):ge(s[3]),null)},i(s){e||(I(n,s),e=!0)},o(s){B(n,s),e=!1},d(s){n&&n.d(s)}}}function rn(t){let e,o;const n=[{name:"file-output"},t[1],{iconNode:t[0]}];let s={$$slots:{default:[sn]},$$scope:{ctx:t}};for(let l=0;l<n.length;l+=1)s=Y(s,n[l]);return e=new $e({props:s}),{c(){K(e.$$.fragment)},m(l,i){R(e,l,i),o=!0},p(l,[i]){const c=i&3?ce(n,[n[0],i&2&&Se(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){o||(I(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){J(e,l)}}}function cn(t,e,o){let{$$slots:n={},$$scope:s}=e;const l=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"}],["polyline",{points:"14 2 14 8 20 8"}],["path",{d:"M2 15h10"}],["path",{d:"m5 12-3 3 3 3"}]];return t.$$set=i=>{o(1,e=Y(Y({},e),Z(i))),"$$scope"in i&&o(3,s=i.$$scope)},e=Z(e),[l,e,n,s]}class Ct extends ee{constructor(e){super(),x(this,e,cn,rn,G,{})}}function an(t){let e;const o=t[2].default,n=_e(o,t,t[3],null);return{c(){n&&n.c()},m(s,l){n&&n.m(s,l),e=!0},p(s,l){n&&n.p&&(!e||l&8)&&me(n,o,s,s[3],e?pe(o,s[3],l,null):ge(s[3]),null)},i(s){e||(I(n,s),e=!0)},o(s){B(n,s),e=!1},d(s){n&&n.d(s)}}}function un(t){let e,o;const n=[{name:"wrench"},t[1],{iconNode:t[0]}];let s={$$slots:{default:[an]},$$scope:{ctx:t}};for(let l=0;l<n.length;l+=1)s=Y(s,n[l]);return e=new $e({props:s}),{c(){K(e.$$.fragment)},m(l,i){R(e,l,i),o=!0},p(l,[i]){const c=i&3?ce(n,[n[0],i&2&&Se(l[1]),i&1&&{iconNode:l[0]}]):{};i&8&&(c.$$scope={dirty:i,ctx:l}),e.$set(c)},i(l){o||(I(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){J(e,l)}}}function fn(t,e,o){let{$$slots:n={},$$scope:s}=e;const l=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"}]];return t.$$set=i=>{o(1,e=Y(Y({},e),Z(i))),"$$scope"in i&&o(3,s=i.$$scope)},e=Z(e),[l,e,n,s]}class Et extends ee{constructor(e){super(),x(this,e,fn,un,G,{})}}function dn(t){let e,o,n,s,l,i,c,f=t[0].data.label+"",r,a,d,u,p,v,M;var k=t[3][t[0].type];function N(E,A){return{props:{size:24}}}return k&&(l=Me(k,N())),{c(){e=C("div"),o=C("div"),n=O(),s=C("div"),l&&K(l.$$.fragment),i=O(),c=C("div"),r=Q(f),a=O(),d=C("div"),h(o,"class","connection-port input-port svelte-12f0dcm"),h(o,"title","Connect to this node"),h(s,"class","node-icon svelte-12f0dcm"),oe(s,"color",t[4][t[0].type]),h(c,"class","node-label svelte-12f0dcm"),h(d,"class","connection-port output-port svelte-12f0dcm"),h(d,"title","Create connection from this node"),h(e,"class","workflow-node svelte-12f0dcm"),oe(e,"transform","translate("+t[0].position.x+"px, "+t[0].position.y+"px)"),oe(e,"border-color",t[4][t[0].type]),h(e,"role","group"),h(e,"aria-label",u=`Workflow node ${t[0].data.label}`),We(e,"selected",t[1])},m(E,A){F(E,e,A),_(e,o),_(e,n),_(e,s),l&&R(l,s,null),_(e,i),_(e,c),_(c,r),_(e,a),_(e,d),p=!0,v||(M=[j(o,"click",t[6]),j(d,"click",t[5]),j(e,"mousedown",t[7])],v=!0)},p(E,[A]){if(A&1&&k!==(k=E[3][E[0].type])){if(l){ve();const z=l;B(z.$$.fragment,1,0,()=>{J(z,1)}),be()}k?(l=Me(k,N()),K(l.$$.fragment),I(l.$$.fragment,1),R(l,s,null)):l=null}(!p||A&1)&&oe(s,"color",E[4][E[0].type]),(!p||A&1)&&f!==(f=E[0].data.label+"")&&re(r,f),(!p||A&1)&&oe(e,"transform","translate("+E[0].position.x+"px, "+E[0].position.y+"px)"),(!p||A&1)&&oe(e,"border-color",E[4][E[0].type]),(!p||A&1&&u!==(u=`Workflow node ${E[0].data.label}`))&&h(e,"aria-label",u),(!p||A&2)&&We(e,"selected",E[1])},i(E){p||(l&&I(l.$$.fragment,E),p=!0)},o(E){l&&B(l.$$.fragment,E),p=!1},d(E){E&&D(e),l&&J(l),v=!1,te(M)}}}function hn(t,e,o){let{node:n}=e,{selected:s=!1}=e;const l=ze(),i={brain:St,input:$t,output:Ct,knowledge:Nt,tool:Et},c={brain:"#8B5CF6",input:"#3B82F6",output:"#10B981",knowledge:"#F59E0B",tool:"#EF4444"};function f(d){d.stopPropagation(),l("connectionStart")}function r(d){d.stopPropagation(),l("connectionEnd")}const a=d=>{d.stopPropagation(),l("nodestartdrag",{nodeId:n.id,event:d})};return t.$$set=d=>{"node"in d&&o(0,n=d.node),"selected"in d&&o(1,s=d.selected)},[n,s,l,i,c,f,r,a]}class _n extends ee{constructor(e){super(),x(this,e,hn,dn,G,{node:0,selected:1})}}function Qe(t,e,o){const n=t.slice();return n[38]=e[o],n}function xe(t,e,o){const n=t.slice();n[41]=e[o];const s=n[0].get(n[41].from);n[42]=s;const l=n[0].get(n[41].to);return n[43]=l,n}function et(t){let e,o,n,s,l;return{c(){e=le("line"),h(e,"x1",o=t[42].position.x+60),h(e,"y1",n=t[42].position.y+40),h(e,"x2",s=t[43].position.x),h(e,"y2",l=t[43].position.y+40),h(e,"stroke","#666"),h(e,"stroke-width","2"),h(e,"marker-end","url(#arrowhead)")},m(i,c){F(i,e,c)},p(i,c){c[0]&17&&o!==(o=i[42].position.x+60)&&h(e,"x1",o),c[0]&17&&n!==(n=i[42].position.y+40)&&h(e,"y1",n),c[0]&17&&s!==(s=i[43].position.x)&&h(e,"x2",s),c[0]&17&&l!==(l=i[43].position.y+40)&&h(e,"y2",l)},d(i){i&&D(e)}}}function tt(t){let e,o=t[42]&&t[43]&&et(t);return{c(){o&&o.c(),e=Oe()},m(n,s){o&&o.m(n,s),F(n,e,s)},p(n,s){n[42]&&n[43]?o?o.p(n,s):(o=et(n),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},d(n){n&&D(e),o&&o.d(n)}}}function nt(t){let e,o;function n(){return t[18](t[38])}function s(){return t[19](t[38])}return e=new _n({props:{node:t[38],selected:t[1]===t[38].id}}),e.$on("connectionStart",n),e.$on("connectionEnd",s),e.$on("nodestartdrag",t[16]),{c(){K(e.$$.fragment)},m(l,i){R(e,l,i),o=!0},p(l,i){t=l;const c={};i[0]&32&&(c.node=t[38]),i[0]&34&&(c.selected=t[1]===t[38].id),e.$set(c)},i(l){o||(I(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){J(e,l)}}}function pn(t){let e,o,n,s,l,i,c,f,r,a,d=Math.round(t[3]*100)+"",u,p,v,M,k,N,E,A,z,q,H,P=X(t[4]),S=[];for(let b=0;b<P.length;b+=1)S[b]=tt(xe(t,P,b));let W=X(t[5]),m=[];for(let b=0;b<W.length;b+=1)m[b]=nt(Qe(t,W,b));const T=b=>B(m[b],1,1,()=>{m[b]=null});return{c(){e=C("div"),o=C("div"),n=le("svg");for(let b=0;b<S.length;b+=1)S[b].c();s=le("defs"),l=le("marker"),i=le("polygon"),c=O();for(let b=0;b<m.length;b+=1)m[b].c();f=O(),r=C("div"),a=C("div"),u=Q(d),p=Q("%"),v=O(),M=C("button"),M.textContent="+",k=O(),N=C("button"),N.textContent="-",E=O(),A=C("button"),A.textContent="â†º",h(i,"points","0 0, 10 3.5, 0 7"),h(i,"fill","#666"),h(l,"id","arrowhead"),h(l,"markerWidth","10"),h(l,"markerHeight","7"),h(l,"refX","9"),h(l,"refY","3.5"),h(l,"orient","auto"),h(n,"class","connections-layer svelte-10kxvy5"),h(o,"class","canvas svelte-10kxvy5"),h(o,"role","application"),h(o,"aria-label","Zoomable and pannable workflow canvas"),h(o,"tabindex","0"),h(a,"class","zoom-level svelte-10kxvy5"),h(M,"class","control-btn svelte-10kxvy5"),h(N,"class","control-btn svelte-10kxvy5"),h(A,"class","control-btn svelte-10kxvy5"),h(r,"class","controls svelte-10kxvy5"),h(e,"class","canvas-container svelte-10kxvy5"),h(e,"role","application"),h(e,"aria-label","Workflow canvas container")},m(b,w){F(b,e,w),_(e,o),_(o,n);for(let y=0;y<S.length;y+=1)S[y]&&S[y].m(n,null);_(n,s),_(s,l),_(l,i),_(o,c);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(o,null);t[20](o),_(e,f),_(e,r),_(r,a),_(a,u),_(a,p),_(r,v),_(r,M),_(r,k),_(r,N),_(r,E),_(r,A),z=!0,q||(H=[j(o,"keydown",t[11]),j(o,"mousedown",t[6]),j(o,"mousemove",t[7]),j(o,"mouseup",t[8]),j(o,"mouseleave",t[8]),j(o,"wheel",t[10]),j(o,"dblclick",t[9]),j(M,"click",t[21]),j(N,"click",t[22]),j(A,"click",t[13])],q=!0)},p(b,w){if(w[0]&17){P=X(b[4]);let y;for(y=0;y<P.length;y+=1){const $=xe(b,P,y);S[y]?S[y].p($,w):(S[y]=tt($),S[y].c(),S[y].m(n,s))}for(;y<S.length;y+=1)S[y].d(1);S.length=P.length}if(w[0]&114722){W=X(b[5]);let y;for(y=0;y<W.length;y+=1){const $=Qe(b,W,y);m[y]?(m[y].p($,w),I(m[y],1)):(m[y]=nt($),m[y].c(),I(m[y],1),m[y].m(o,null))}for(ve(),y=W.length;y<m.length;y+=1)T(y);be()}(!z||w[0]&8)&&d!==(d=Math.round(b[3]*100)+"")&&re(u,d)},i(b){if(!z){for(let w=0;w<W.length;w+=1)I(m[w]);z=!0}},o(b){m=m.filter(Boolean);for(let w=0;w<m.length;w+=1)B(m[w]);z=!1},d(b){b&&D(e),ie(S,b),ie(m,b),t[20](null),q=!1,te(H)}}}function mn(t,e,o){let n,s,{nodes:l=new Map}=e,{connections:i=new Map}=e,{selectedNodeId:c=null}=e;const f=ze();let r,a=1,d=0,u=0,p=!1,v=0,M=0,k=0,N=0,E=null,A={x:0,y:0},z=0,q=0,H=!1,P=null;wt(()=>{var L;const g=(L=r.parentElement)==null?void 0:L.getBoundingClientRect();g&&(d=g.width/2-2500*a,u=g.height/2-2500*a),S()});function S(){r&&o(2,r.style.transform=`translate(${d}px, ${u}px) scale(${a})`,r)}function W(g){g.target===r&&(p=!0,v=g.clientX,M=g.clientY,k=d,N=u)}function m(g){if(p){const L=g.clientX-v,U=g.clientY-M;d=k+L,u=N+U,S()}else if(E){const L=g.clientX-z,U=g.clientY-q,V=l.get(E);V&&(V.position.x=A.x+L/a,V.position.y=A.y+U/a,o(0,l))}}function T(){p=!1,E=null}function b(g){if(g.target===r){const L=r.getBoundingClientRect(),U=(g.clientX-L.left)/a,V=(g.clientY-L.top)/a;f("nodeAdd",{type:"brain",position:{x:U,y:V}})}}function w(g){var He;g.preventDefault();const L=.1,U=(He=r.parentElement)==null?void 0:He.getBoundingClientRect();if(!U)return;const V=g.clientX-U.left,Je=g.clientY-U.top,Bt=(V-d)/a,jt=(Je-u)/a,Pt=g.deltaY<0?1:-1;o(3,a*=1+Pt*L),o(3,a=Math.min(Math.max(.1,a),5)),d=V-Bt*a,u=Je-jt*a,S()}function y(g){g.key==="ArrowLeft"?(d+=40,S(),g.preventDefault()):g.key==="ArrowRight"?(d-=40,S(),g.preventDefault()):g.key==="ArrowUp"?(u+=40,S(),g.preventDefault()):g.key==="ArrowDown"?(u-=40,S(),g.preventDefault()):g.key==="+"||g.key==="="?($(1.2),g.preventDefault()):(g.key==="-"||g.key==="_")&&($(.8),g.preventDefault())}function $(g){o(3,a*=g),o(3,a=Math.min(Math.max(.1,a),5)),S()}function ne(){var L;o(3,a=1);const g=(L=r.parentElement)==null?void 0:L.getBoundingClientRect();g&&(d=g.width/2-2500,u=g.height/2-2500),S()}function Xe(g){H=!0,P=g,console.log("ðŸ”— Starting connection from:",g)}function Re(g){H&&P&&P!==g&&(f("connectionCreate",{from:P,to:g}),console.log("âœ… Connection created:",P,"->",g)),H=!1,P=null}function At(g){const{nodeId:L,event:U}=g.detail;E=L;const V=l.get(L);V&&(A.x=V.position.x,A.y=V.position.y),z=U.clientX,q=U.clientY,p=!1}const It=g=>Xe(g.id),Wt=g=>Re(g.id);function Mt(g){fe[g?"unshift":"push"](()=>{r=g,o(2,r)})}const Ot=()=>$(1.2),zt=()=>$(.8);return t.$$set=g=>{"nodes"in g&&o(0,l=g.nodes),"connections"in g&&o(17,i=g.connections),"selectedNodeId"in g&&o(1,c=g.selectedNodeId)},t.$$.update=()=>{t.$$.dirty[0]&4&&r&&S(),t.$$.dirty[0]&1&&o(5,n=Array.from(l.values())),t.$$.dirty[0]&131072&&o(4,s=Array.from(i.values()))},[l,c,r,a,s,n,W,m,T,b,w,y,$,ne,Xe,Re,At,i,It,Wt,Mt,Ot,zt]}class gn extends ee{constructor(e){super(),x(this,e,mn,pn,G,{nodes:0,connections:17,selectedNodeId:1},null,[-1,-1])}}function ot(t,e,o){const n=t.slice();return n[6]=e[o],n}function lt(t){let e,o,n,s,l,i,c,f,r;var a=t[6].icon;function d(v,M){return{props:{size:20}}}a&&(n=Me(a,d()));function u(){return t[3](t[6])}function p(...v){return t[4](t[6],...v)}return{c(){e=C("div"),o=C("div"),n&&K(n.$$.fragment),s=O(),l=C("div"),l.textContent=`${t[6].label}`,i=O(),h(o,"class","component-icon"),oe(o,"color",t[6].color),h(l,"class","component-label svelte-pdgzwu"),h(e,"class","component svelte-pdgzwu"),h(e,"role","button"),h(e,"aria-label",`Add ${t[6].label} node`),h(e,"tabindex","0")},m(v,M){F(v,e,M),_(e,o),n&&R(n,o,null),_(e,s),_(e,l),_(e,i),c=!0,f||(r=[j(e,"click",u),j(e,"keydown",p)],f=!0)},p(v,M){if(t=v,a!==(a=t[6].icon)){if(n){ve();const k=n;B(k.$$.fragment,1,0,()=>{J(k,1)}),be()}a?(n=Me(a,d()),K(n.$$.fragment),I(n.$$.fragment,1),R(n,o,null)):n=null}},i(v){c||(n&&I(n.$$.fragment,v),c=!0)},o(v){n&&B(n.$$.fragment,v),c=!1},d(v){v&&D(e),n&&J(n),f=!1,te(r)}}}function vn(t){let e,o,n,s,l=X(t[0]),i=[];for(let f=0;f<l.length;f+=1)i[f]=lt(ot(t,l,f));const c=f=>B(i[f],1,1,()=>{i[f]=null});return{c(){e=C("div"),o=C("h3"),o.textContent="Components",n=O();for(let f=0;f<i.length;f+=1)i[f].c();h(o,"class","svelte-pdgzwu"),h(e,"class","components-panel svelte-pdgzwu"),h(e,"role","navigation"),h(e,"aria-label","Components panel")},m(f,r){F(f,e,r),_(e,o),_(e,n);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);s=!0},p(f,[r]){if(r&7){l=X(f[0]);let a;for(a=0;a<l.length;a+=1){const d=ot(f,l,a);i[a]?(i[a].p(d,r),I(i[a],1)):(i[a]=lt(d),i[a].c(),I(i[a],1),i[a].m(e,null))}for(ve(),a=l.length;a<i.length;a+=1)c(a);be()}},i(f){if(!s){for(let r=0;r<l.length;r+=1)I(i[r]);s=!0}},o(f){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)B(i[r]);s=!1},d(f){f&&D(e),ie(i,f)}}}function bn(t){const e=ze(),o=[{type:"brain",label:"AI Brain",icon:St,color:"#8B5CF6"},{type:"input",label:"Input",icon:$t,color:"#3B82F6"},{type:"output",label:"Output",icon:Ct,color:"#10B981"},{type:"knowledge",label:"Knowledge",icon:Nt,color:"#F59E0B"},{type:"tool",label:"Tool",icon:Et,color:"#EF4444"}];function n(c){e("nodeAdd",{type:c})}function s(c,f){(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n(f))}return[o,n,s,c=>n(c.type),(c,f)=>s(f,c.type)]}class kn extends ee{constructor(e){super(),x(this,e,bn,vn,G,{})}}class wn{constructor(){this.ws=null,this.handlers=new Set}connect(){if(this.ws&&(this.ws.readyState===WebSocket.OPEN||this.ws.readyState===WebSocket.CONNECTING))return;const o=`${location.protocol==="https:"?"wss":"ws"}://${location.host}/ws`;this.ws=new WebSocket(o),this.ws.onopen=()=>{console.log("[WS] connected")},this.ws.onmessage=n=>{try{const s=JSON.parse(n.data);this.handlers.forEach(l=>l(s))}catch(s){console.error("[WS] message parse error",s)}},this.ws.onclose=()=>{console.log("[WS] disconnected")},this.ws.onerror=n=>{console.error("[WS] error",n)}}onMessage(e){return this.handlers.add(e),()=>this.handlers.delete(e)}executeWorkflow(e){const o={type:"execute_workflow",data:e};this._send(o)}_send(e){const o=JSON.stringify(e);if(this.ws&&this.ws.readyState===WebSocket.OPEN)this.ws.send(o);else{console.warn("[WS] not open, buffering send until open");const n=setInterval(()=>{this.ws&&this.ws.readyState===WebSocket.OPEN&&(clearInterval(n),this.ws.send(o))},200)}}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}}const Ee=new wn;function st(t,e,o){const n=t.slice();return n[13]=e[o],n}function it(t,e,o){const n=t.slice();return n[16]=e[o],n}function rt(t){let e,o=t[16]+"",n;return{c(){e=C("option"),n=Q(o),e.__value=t[16],we(e,e.__value)},m(s,l){F(s,e,l),_(e,n)},p:he,d(s){s&&D(e)}}}function ct(t){let e,o=t[13]+"",n,s;return{c(){e=C("option"),n=Q(o),e.__value=s=t[13],we(e,e.__value)},m(l,i){F(l,e,i),_(e,n)},p(l,i){i&1&&o!==(o=l[13]+"")&&re(n,o),i&33&&s!==(s=l[13])&&(e.__value=s,we(e,e.__value))},d(l){l&&D(e)}}}function yn(t){let e,o,n,s,l,i,c,f,r,a,d,u,p,v,M,k,N,E,A,z,q,H,P,S,W=X(t[5]),m=[];for(let w=0;w<W.length;w+=1)m[w]=rt(it(t,W,w));let T=X(t[4][t[0]]),b=[];for(let w=0;w<T.length;w+=1)b[w]=ct(st(t,T,w));return{c(){e=C("div"),o=C("h3"),o.textContent="Tool Configuration",n=O(),s=C("label"),l=C("span"),l.textContent="Tool",i=O(),c=C("select");for(let w=0;w<m.length;w+=1)m[w].c();f=O(),r=C("label"),a=C("span"),a.textContent="Action",d=O(),u=C("select");for(let w=0;w<b.length;w+=1)b[w].c();p=O(),v=C("label"),M=C("span"),M.textContent="Params (JSON)",k=O(),N=C("textarea"),E=O(),A=C("label"),z=C("input"),q=O(),H=C("span"),H.textContent="Mock mode (no external calls)",h(o,"class","svelte-pb9sv2"),h(l,"class","svelte-pb9sv2"),h(c,"class","svelte-pb9sv2"),t[0]===void 0&&Ne(()=>t[8].call(c)),h(s,"class","svelte-pb9sv2"),h(a,"class","svelte-pb9sv2"),h(u,"class","svelte-pb9sv2"),t[1]===void 0&&Ne(()=>t[9].call(u)),h(r,"class","svelte-pb9sv2"),h(M,"class","svelte-pb9sv2"),h(N,"rows","8"),h(N,"spellcheck",!1),h(N,"class","svelte-pb9sv2"),h(v,"class","svelte-pb9sv2"),h(z,"type","checkbox"),h(z,"class","svelte-pb9sv2"),h(H,"class","svelte-pb9sv2"),h(A,"class","checkbox svelte-pb9sv2"),h(e,"class","tool-config svelte-pb9sv2")},m(w,y){F(w,e,y),_(e,o),_(e,n),_(e,s),_(s,l),_(s,i),_(s,c);for(let $=0;$<m.length;$+=1)m[$]&&m[$].m(c,null);Ce(c,t[0],!0),_(e,f),_(e,r),_(r,a),_(r,d),_(r,u);for(let $=0;$<b.length;$+=1)b[$]&&b[$].m(u,null);Ce(u,t[1],!0),_(e,p),_(e,v),_(v,M),_(v,k),_(v,N),we(N,t[2]),_(e,E),_(e,A),_(A,z),z.checked=t[3],_(A,q),_(A,H),P||(S=[j(c,"change",t[8]),j(c,"change",t[6]),j(u,"change",t[9]),j(u,"change",t[6]),j(N,"input",t[10]),j(N,"input",t[6]),j(z,"change",t[11]),j(z,"change",t[6])],P=!0)},p(w,[y]){if(y&32){W=X(w[5]);let $;for($=0;$<W.length;$+=1){const ne=it(w,W,$);m[$]?m[$].p(ne,y):(m[$]=rt(ne),m[$].c(),m[$].m(c,null))}for(;$<m.length;$+=1)m[$].d(1);m.length=W.length}if(y&33&&Ce(c,w[0]),y&17){T=X(w[4][w[0]]);let $;for($=0;$<T.length;$+=1){const ne=st(w,T,$);b[$]?b[$].p(ne,y):(b[$]=ct(ne),b[$].c(),b[$].m(u,null))}for(;$<b.length;$+=1)b[$].d(1);b.length=T.length}y&19&&Ce(u,w[1]),y&4&&we(N,w[2]),y&8&&(z.checked=w[3])},i:he,o:he,d(w){w&&D(e),ie(m,w),ie(b,w),P=!1,te(S)}}}function Nn(t,e,o){var k,N,E,A;let{node:n}=e;const s=ze(),l={calendar:["create_event","find_free_slots","list_events","update_event","cancel_event"],email:["draft","send","search","read","summarize"],slack:["post_message","fetch_history","reply_thread","summarize"],web_search:["search"],web_crawl:["fetch","summarize","extract"],writer:["outline","draft","revise"],notion:["create_page","update_page","query_database"],jira:["create_issue","update_issue","search"],github:["create_issue","summarize_pr","propose_changes"],sheets:["append_rows","read_range","analyze"],sql:["query","explain"],translator:["translate"],summarizer:["summarize"],sentiment:["analyze"]},i=Object.keys(l);let c=((k=n.data.configuration)==null?void 0:k.tool)||"email",f=((N=n.data.configuration)==null?void 0:N.action)||l[c][0],r=JSON.stringify(((E=n.data.configuration)==null?void 0:E.params)||{},null,2),a=!!(((A=n.data.configuration)==null?void 0:A.mock)??!0);function d(){let z={};try{z=r.trim()?JSON.parse(r):{}}catch{}s("updateConfig",{configuration:{tool:c,action:f,params:z,mock:a}})}function u(){c=Ue(this),o(0,c),o(5,i)}function p(){f=Ue(this),o(1,f),o(0,c),o(4,l),o(0,c)}function v(){r=this.value,o(2,r)}function M(){a=this.checked,o(3,a)}return t.$$set=z=>{"node"in z&&o(7,n=z.node)},t.$$.update=()=>{t.$$.dirty&3&&(l[c].includes(f)||(o(1,f=l[c][0]),d()))},[c,f,r,a,l,i,d,n,u,p,v,M]}class Sn extends ee{constructor(e){super(),x(this,e,Nn,yn,G,{node:7})}}function at(t,e,o){const n=t.slice();return n[13]=e[o],n}function Ye(t){const e=t.slice(),o=e[0].get(e[2]);return e[16]=o,e}function ut(t){let e,o,n=t[16]&&t[16].type==="tool"&&ft(t);return{c(){n&&n.c(),e=Oe()},m(s,l){n&&n.m(s,l),F(s,e,l),o=!0},p(s,l){s[16]&&s[16].type==="tool"?n?(n.p(s,l),l&5&&I(n,1)):(n=ft(s),n.c(),I(n,1),n.m(e.parentNode,e)):n&&(ve(),B(n,1,1,()=>{n=null}),be())},i(s){o||(I(n),o=!0)},o(s){B(n),o=!1},d(s){s&&D(e),n&&n.d(s)}}}function ft(t){let e,o;return e=new Sn({props:{node:t[16]}}),e.$on("updateConfig",t[9]),{c(){K(e.$$.fragment)},m(n,s){R(e,n,s),o=!0},p(n,s){const l={};s&5&&(l.node=n[16]),e.$set(l)},i(n){o||(I(e.$$.fragment,n),o=!0)},o(n){B(e.$$.fragment,n),o=!1},d(n){J(e,n)}}}function dt(t){let e,o,n,s,l=X(t[3]),i=[];for(let c=0;c<l.length;c+=1)i[c]=mt(at(t,l,c));return{c(){e=C("div"),o=C("h3"),o.textContent="Execution Results",n=O(),s=C("div");for(let c=0;c<i.length;c+=1)i[c].c();h(o,"class","svelte-j8i41c"),h(s,"class","results-content"),h(e,"class","results-panel svelte-j8i41c")},m(c,f){F(c,e,f),_(e,o),_(e,n),_(e,s);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(s,null)},p(c,f){if(f&8){l=X(c[3]);let r;for(r=0;r<l.length;r+=1){const a=at(c,l,r);i[r]?i[r].p(a,f):(i[r]=mt(a),i[r].c(),i[r].m(s,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=l.length}},d(c){c&&D(e),ie(i,c)}}}function ht(t){let e,o=t[13].content+"",n;return{c(){e=C("p"),n=Q(o),h(e,"class","svelte-j8i41c")},m(s,l){F(s,e,l),_(e,n)},p(s,l){l&8&&o!==(o=s[13].content+"")&&re(n,o)},d(s){s&&D(e)}}}function _t(t){let e,o=JSON.stringify(t[13].result,null,2)+"",n;return{c(){e=C("pre"),n=Q(o),h(e,"class","svelte-j8i41c")},m(s,l){F(s,e,l),_(e,n)},p(s,l){l&8&&o!==(o=JSON.stringify(s[13].result,null,2)+"")&&re(n,o)},d(s){s&&D(e)}}}function pt(t){let e,o=t[13].error+"",n;return{c(){e=C("p"),n=Q(o),h(e,"class","error-text svelte-j8i41c")},m(s,l){F(s,e,l),_(e,n)},p(s,l){l&8&&o!==(o=s[13].error+"")&&re(n,o)},d(s){s&&D(e)}}}function mt(t){let e,o,n=t[13].type+"",s,l,i,c,f,r=t[13].content&&ht(t),a=t[13].result&&_t(t),d=t[13].error&&pt(t);return{c(){e=C("div"),o=C("strong"),s=Q(n),l=O(),r&&r.c(),i=O(),a&&a.c(),c=O(),d&&d.c(),f=O(),h(o,"class","svelte-j8i41c"),h(e,"class","result-item svelte-j8i41c"),We(e,"error",t[13].type==="execution_error")},m(u,p){F(u,e,p),_(e,o),_(o,s),_(e,l),r&&r.m(e,null),_(e,i),a&&a.m(e,null),_(e,c),d&&d.m(e,null),_(e,f)},p(u,p){p&8&&n!==(n=u[13].type+"")&&re(s,n),u[13].content?r?r.p(u,p):(r=ht(u),r.c(),r.m(e,i)):r&&(r.d(1),r=null),u[13].result?a?a.p(u,p):(a=_t(u),a.c(),a.m(e,c)):a&&(a.d(1),a=null),u[13].error?d?d.p(u,p):(d=pt(u),d.c(),d.m(e,f)):d&&(d.d(1),d=null),p&8&&We(e,"error",u[13].type==="execution_error")},d(u){u&&D(e),r&&r.d(),a&&a.d(),d&&d.d()}}}function $n(t){let e,o,n,s,l,i,c,f,r,a,d,u,p,v,M,k,N,E,A;r=new kn({}),r.$on("nodeAdd",t[4]);function z(m){t[10](m)}function q(m){t[11](m)}function H(m){t[12](m)}let P={};t[0]!==void 0&&(P.nodes=t[0]),t[1]!==void 0&&(P.connections=t[1]),t[2]!==void 0&&(P.selectedNodeId=t[2]),d=new gn({props:P}),fe.push(()=>De(d,"nodes",z)),fe.push(()=>De(d,"connections",q)),fe.push(()=>De(d,"selectedNodeId",H)),d.$on("nodeAdd",t[5]),d.$on("nodeSelect",t[6]),d.$on("connectionCreate",t[7]);let S=t[2]&&ut(Ye(t)),W=t[3].length>0&&dt(t);return{c(){e=O(),o=C("div"),n=C("header"),s=C("h1"),s.textContent="Weev AI Agent Workflow Builder",l=O(),i=C("button"),i.textContent="â–¶ Execute Workflow",c=O(),f=C("main"),K(r.$$.fragment),a=O(),K(d.$$.fragment),M=O(),S&&S.c(),k=O(),W&&W.c(),document.title="Weev - AI Agent Workflow Builder",h(s,"class","svelte-j8i41c"),h(i,"class","execute-btn svelte-j8i41c"),h(n,"class","header svelte-j8i41c"),h(f,"class","main svelte-j8i41c"),h(o,"class","app svelte-j8i41c")},m(m,T){F(m,e,T),F(m,o,T),_(o,n),_(n,s),_(n,l),_(n,i),_(o,c),_(o,f),R(r,f,null),_(f,a),R(d,f,null),_(f,M),S&&S.m(f,null),_(f,k),W&&W.m(f,null),N=!0,E||(A=j(i,"click",t[8]),E=!0)},p(m,[T]){const b={};!u&&T&1&&(u=!0,b.nodes=m[0],je(()=>u=!1)),!p&&T&2&&(p=!0,b.connections=m[1],je(()=>p=!1)),!v&&T&4&&(v=!0,b.selectedNodeId=m[2],je(()=>v=!1)),d.$set(b),m[2]?S?(S.p(Ye(m),T),T&4&&I(S,1)):(S=ut(Ye(m)),S.c(),I(S,1),S.m(f,k)):S&&(ve(),B(S,1,1,()=>{S=null}),be()),m[3].length>0?W?W.p(m,T):(W=dt(m),W.c(),W.m(f,null)):W&&(W.d(1),W=null)},i(m){N||(I(r.$$.fragment,m),I(d.$$.fragment,m),I(S),N=!0)},o(m){B(r.$$.fragment,m),B(d.$$.fragment,m),B(S),N=!1},d(m){m&&(D(e),D(o)),J(r),J(d),S&&S.d(),W&&W.d(),E=!1,A()}}}function Cn(t,e,o){let n=new Map,s=new Map,l=null,i=[];wt(()=>(Ee.connect(),Ee.onMessage(k=>{o(3,i=[...i,k]),console.log("ðŸ“¨ Execution update:",k)}),()=>{Ee.disconnect()}));function c(k){const N=`node_${Date.now()}`,E={brain:"AI Brain",input:"Input",output:"Output",knowledge:"Knowledge",tool:"Tool"},A={id:N,type:k.detail.type,position:{x:2400+Math.random()*100,y:2400+Math.random()*100},data:{label:E[k.detail.type],configuration:k.detail.type==="tool"?{tool:"email",action:"draft",params:{to:["user@example.com"],subject:"Hello"},mock:!0}:{}}};n.set(N,A),o(0,n),o(2,l=N)}function f(k){const N=`node_${Date.now()}`,E={brain:"AI Brain",input:"Input",output:"Output",knowledge:"Knowledge",tool:"Tool"},A={id:N,type:k.detail.type,position:k.detail.position,data:{label:E[k.detail.type],configuration:k.detail.type==="tool"?{tool:"email",action:"draft",params:{to:["user@example.com"],subject:"Hello"},mock:!0}:{}}};n.set(N,A),o(0,n),o(2,l=N)}function r(k){o(2,l=k.detail.nodeId)}function a(k){const N=`${k.detail.from}-${k.detail.to}`;s.set(N,{id:N,from:k.detail.from,to:k.detail.to}),o(1,s)}function d(){if(n.size===0){alert("Add some nodes to execute a workflow!");return}const k={workflow_id:`workflow_${Date.now()}`,nodes:Array.from(n.values()).map(N=>({node_id:N.id,node_type:N.type,system_rules:`Execute ${N.type} node`,user_configuration:N.data.configuration})),connections:Array.from(s.values())};o(3,i=[]),Ee.executeWorkflow(k)}function u(k){if(!l)return;const N=n.get(l);N&&(N.data.configuration=k.detail.configuration,o(0,n))}function p(k){n=k,o(0,n)}function v(k){s=k,o(1,s)}function M(k){l=k,o(2,l)}return[n,s,l,i,c,f,r,a,d,u,p,v,M]}class En extends ee{constructor(e){super(),x(this,e,Cn,$n,G,{})}}new En({target:document.getElementById("app")});
